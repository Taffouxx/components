function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}import{observable}from"mobx";import React,{createContext,useCallback,useContext,useMemo}from"react";import{Button,Column}from"../../design";import{emptyValue,ObservedInputElement}from"./InputElement";export function getInitialValues(a,b){var c={};return Object.keys(a).forEach(function(d){var e;return c[d]=null!==(e=null===b||void 0===b?void 0:b[d])&&void 0!==e?e:emptyValue(a[d])}),c}var FormContext=createContext(null);export function FormElement(a){var b=a.id,c=useContext(FormContext),d=c.schema,e=c.disabled,f=c.values,g=c.onChange,h=c.data;return React.createElement(ObservedInputElement,_extends({type:d[b],disabled:e,value:function value(){return f[b]},onChange:function onChange(a){f[b]=a,null===g||void 0===g?void 0:g(f,b)}},h[b]))}export function Form(a){var b=a.schema,c=a.data,d=a.disabled,e=a.onChange,f=a.onSubmit,g=a.observed,h=a.defaults,i=a.submitBtn,j=a.children,k=useMemo(function(){return Object.keys(b)},[]),l=useMemo(function(){return null!==g&&void 0!==g?g:observable(getInitialValues(b,h))},[]),m=useCallback(function(a){a.preventDefault(),null===f||void 0===f?void 0:f(l)},[f]);return React.createElement("form",{onSubmit:m},React.createElement(Column,null,React.createElement(FormContext.Provider,{value:{schema:b,disabled:d,values:l,onChange:e,data:c}},null!==j&&void 0!==j?j:k.map(function(a){return React.createElement(FormElement,{key:a,id:a})})),i&&React.createElement(Button,_extends({type:"submit",children:"Submit",disabled:d},i))))}