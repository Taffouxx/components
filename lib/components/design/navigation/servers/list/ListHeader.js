"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListHeader=ListHeader;var _mobxReactLite=require("mobx-react-lite"),_react=_interopRequireDefault(require("react")),_styledComponents=_interopRequireDefault(require("styled-components")),_context=require("../../../../../lib/context"),_isTouchscreenDevice=require("../../../../../lib/isTouchscreenDevice"),_atoms=require("../../../atoms"),_Tooltip=require("../../../atoms/indicators/Tooltip"),_Unreads=require("../../../atoms/indicators/Unreads"),_UserTooltip=require("../../../atoms/indicators/UserTooltip"),_Item=require("./Item");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}const UserItem=(0,_mobxReactLite.observer)(a=>{let{client:b,home:c,active:d}=a;const e=(0,_context.useLink)(),f=(0,_context.useTrigger)(),g=_isTouchscreenDevice.isTouchscreenDevice?0:[...b.users.values()].filter(a=>"Incoming"===a.relationship).length;return _react.default.createElement(e,{to:c()},!d&&_react.default.createElement(_Item.SwooshOverlay,null),_react.default.createElement(_UserTooltip.UserTooltip,{user:b.user,div:!0,right:!0},_react.default.createElement(f,{id:"Status"},_react.default.createElement(_atoms.Avatar,{src:b.user.generateAvatarURL({max_side:256},!1),size:42,interactive:!0,holepunch:g?"right":"bottom-right",overlay:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_Unreads.Unreads,{count:g,unread:0<g}),_react.default.createElement(_atoms.UserStatus,{user:b.user}))}))))}),List=_styledComponents.default.div.withConfig({displayName:"List",componentId:"sc-1a19ihl-0"})(["gap:12px;display:flex;margin-top:8px;margin-bottom:12px;flex-direction:column;"]),ChannelInner=(0,_mobxReactLite.observer)(a=>{var b,c;let{channel:d,permit:e}=a;const f=d.isUnread(e),g=d.getMentions(e).length;return _react.default.createElement(_Tooltip.Tooltip,{content:null!==(b=d.name)&&void 0!==b?b:null===(c=d.recipient)||void 0===c?void 0:c.username,div:!0,right:!0},_react.default.createElement(_atoms.Avatar,{size:42,interactive:!0,fallback:d.name,holepunch:f&&"top-right",src:d.generateIconURL({max_side:256},!1),overlay:_react.default.createElement(_Unreads.Unreads,{unread:f,count:g})}))}),UnreadDMs=(0,_mobxReactLite.observer)(a=>{let{client:b,permit:c}=a;const d=(0,_context.useLink)(),e=[...b.channels.values()].filter(a=>("DirectMessage"===a.channel_type&&a.active||"Group"===a.channel_type)&&a.unread);return 0===e.length?null:_react.default.createElement(List,null,e.map(a=>_react.default.createElement(d,{key:a._id,to:"/channel/".concat(a._id)},_react.default.createElement(ChannelInner,{channel:a,permit:c}))))});function ListHeader(a){return _react.default.createElement(_Item.ItemContainer,{head:!0},_react.default.createElement(UserItem,a),_react.default.createElement(UnreadDMs,a),_react.default.createElement(_atoms.LineDivider,{compact:!0}))}